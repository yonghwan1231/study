<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="./js/button.js"></script>
</head>

<body>
  <h4>객체를 JSON으로 변환하기</h4>
  <script>

    // //JSON.stringify() 함수는 Javascript의 값이나 객체를 JSON 문자열로 변환합니다.
    // //JSON.stringfy(value, replacer, space)
    // //value : JSON 문자열로 변환할 값 또는 객체 (필수)
    // //replacer : JSON 변경 규칙을 정의할 함수 또는 JSON 에 포함될 프로퍼티(속성)을 가지는 배열 (생략가능)
    // //space : 들여쓰기 공백 갯수 또는 문자열 (생략가능)

    // const obj = {
    //   id : 123,
    //   product : {
    //     type : 'book',
    //     page : 200,
    //     title : 'javascript',
    //     tags : ['js','begineer']
    //   },
    //   x : 1,
    //   y : 2,
    //   z : {
    //     z1 : 'z1'
    //   }
    // }

    // const json1 = JSON.stringify(obj)
    // console.log(json1) //문자열을 감쌀때는 쌍따옴표로 처리된다. 키의 값이 undefined, Symbol, function면 변환되지 않고 무시된다. 단 이 값들이 배열안에 들어있는 경우에는 모두 null로 변환된다.

    // //특정항목만 JSON 변환하기
    // const json2 = JSON.stringify(obj,['product'])
    // console.log(json2) 
    // //product 안의 내용까지 변환하고 싶다면
    // const json3 = JSON.stringify(obj, ['product','type'])
    // console.log(json3)

    // //replacer가 함수일 경우
    // function replacer(key,value){ //key에 obj의 키가, value에 현재 처리중인 키의 값이 전달된다.
    //   console.log(key + " : " + value)
    //   if(key==='x'){
    //     return undefined; // x를 생략하고 변환하기 위해 undefined를 반환시켰다
    //   }else{
    //     return value;
    //   }
    // }

    // const json4 = JSON.stringify(obj, replacer);

    // console.log(json4)

    // //속성값 변경하기
    // function replacer2(key,value){
    //   console.log(key + " : " + value)
    //   if(key==='x'){
    //     return value+1;
    //   }else{
    //     return value;
    //   }
    // }

    // const json5 = JSON.stringify(obj, replacer2);

    // console.log(json5)

    // //들여쓰기(indent) 설정하기
    // const json6 = JSON.stringify(obj,null,5) //세번째 파라미터가 여백(스페이스갯수)이다. 문자열로 '     '이렇게 넣어도 되고 숫자로 스페이스개수를 넣어줘도 된다

    // console.log(json6)

    // //들여쓰기(indent) 설정하기 - 문자로
    // const json7 = JSON.stringify(obj,null,'**') // 들여쓰기 영역을 **로 채운다

    // console.log(json7)

    //두번째

    //JSON.stringify(value, replacer, space) 함수
    //value : json 문자열로 변환할 값 또는 객체 (필수)
    //replacer : json 변경 규칙을 정의할 함수 또는 json에 포함될 프로퍼티(속성)을 가진 배열 (생략)
    //space : 들여쓰기 공백 갯수 또는 문자열

    const obj_1 = {
      id: 123,
      type: 'book',
      page: 200,
      title: 'javescript',
      tags: ['js', 'Beginner']
    }

    const json_1 = JSON.stringify(obj_1)
    console.log(json_1)

    //JSON.stringify() 함수로 변환되지 않는 항목

    const obj_2 = {
      x: undefined,
      y: Symbol(''),
      z: function () {
        alert('hi')
      },
      arr: [
        1,
        undefined,
        Symbol,
        function () { alert('hi') }
      ]
    };

    const json_2 = JSON.stringify(obj_2)

    console.log(json_2)

    //undefined, Symbol, function은 변환되지 않고 무시된다. 단, 이 값들이 배열안에 들어있는 경우 null로 변환된다.

    //특정항목만 JSON 문자열로 변환하기

    const obj_3 = {
      x: 'x',
      y: 'y',
      z: {
        z1: 'z1'
      }
    }

    const json_3 = JSON.stringify(obj_3, ['x'])
    const json_3_1 = JSON.stringify(obj_3, ['y'])
    const json_3_2 = JSON.stringify(obj_3, ['x', 'y'])
    const json_3_3 = JSON.stringify(obj_3, ['z'])
    const json_3_4 = JSON.stringify(obj_3, ['z', 'z1'])
    const json_3_5 = JSON.stringify(obj_3, ['z1'])
    console.log(json_3)
    console.log(json_3_1)
    console.log(json_3_2)
    console.log(json_3_3)
    console.log(json_3_4)
    console.log(json_3_5) // 객체 안의 객체를 변환하려면 그 객체를 포함한 키(속성)도 함께 변환시켜주어야 한다. json3_4 처럼

    //replacer가 함수인 경우

    const obj_4 = {
      x: 'x',
      y: 'y',
      z: {
        z1: 'z1'
      }
    }

    function replacer(key, value) {
      if (key === 'x') {
        return
      }
    }


  </script>
</body>

</html>